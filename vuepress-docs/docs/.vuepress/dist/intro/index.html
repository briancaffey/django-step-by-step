<!DOCTYPE html>
<html lang="en-US">
  <head>
    <link rel="manifest" href="/manifest.webmanifest"><meta name="theme-color" content="#3eaf7c"><link rel="icon" type="image/png" sizes="16x16" href="/images/ublog.png"><title>Project Introduction | μblog docs</title><meta name="description" content="documentation for μblog, a reference web application built with Django and Vue.js"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.23">
    <link rel="preload" href="/assets/js/runtime~app.40c5ecb7.js" as="script"><link rel="preload" href="/assets/css/styles.a5e6a47d.css" as="style"><link rel="preload" href="/assets/js/646.53e051e1.js" as="script"><link rel="preload" href="/assets/js/app.62082096.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.a5e6a47d.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/" class=""><img class="logo" src="/images/ublog.png" alt="μblog docs"><span class="site-name can-hide">μblog docs</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a aria-current="page" href="/intro" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Topics"><span class="title">Topics</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Topics"><span class="title">Topics</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/topics/twelve-factor-app" class="nav-link" aria-label="Twelve-Factor App"><!--[--><!--]--> Twelve-Factor App <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/topics/quasar/" class="nav-link" aria-label="Quasar"><!--[--><!--]--> Quasar <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/topics/netlify/" class="nav-link" aria-label="Netlify"><!--[--><!--]--> Netlify <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/topics/docker-compose/" class="nav-link" aria-label="Docker Compose"><!--[--><!--]--> Docker Compose <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/topics/jwt-authentication/" class="nav-link" aria-label="JWT Authentication"><!--[--><!--]--> JWT Authentication <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/topics/vuepress/" class="nav-link" aria-label="VuePress"><!--[--><!--]--> VuePress <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/guide/step-by-step/" class="nav-link" aria-label="Step by step guide"><!--[--><!--]--> Step by step guide <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>CI/CD</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/guide/ci-cd/github-actions/" class="nav-link" aria-label="GitHub Actions"><!--[--><!--]--> GitHub Actions <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/guide/ci-cd/gitlab-ci/" class="nav-link" aria-label="GitLab CI"><!--[--><!--]--> GitLab CI <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Deploy"><span class="title">Deploy</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Deploy"><span class="title">Deploy</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/deploy/aws/" class="nav-link" aria-label="AWS"><!--[--><!--]--> AWS <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/deploy/raspi/" class="nav-link" aria-label="Raspberry Pi"><!--[--><!--]--> Raspberry Pi <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/deploy/digital-ocean/" class="nav-link" aria-label="DigitalOcean"><!--[--><!--]--> DigitalOcean <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/deploy/heroku/" class="nav-link" aria-label="Heroku"><!--[--><!--]--> Heroku <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/intro/" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/zh/" class="nav-link" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/briancaffey/django-step-by-step" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a aria-current="page" href="/intro" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Topics"><span class="title">Topics</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Topics"><span class="title">Topics</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/topics/twelve-factor-app" class="nav-link" aria-label="Twelve-Factor App"><!--[--><!--]--> Twelve-Factor App <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/topics/quasar/" class="nav-link" aria-label="Quasar"><!--[--><!--]--> Quasar <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/topics/netlify/" class="nav-link" aria-label="Netlify"><!--[--><!--]--> Netlify <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/topics/docker-compose/" class="nav-link" aria-label="Docker Compose"><!--[--><!--]--> Docker Compose <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/topics/jwt-authentication/" class="nav-link" aria-label="JWT Authentication"><!--[--><!--]--> JWT Authentication <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/topics/vuepress/" class="nav-link" aria-label="VuePress"><!--[--><!--]--> VuePress <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/guide/step-by-step/" class="nav-link" aria-label="Step by step guide"><!--[--><!--]--> Step by step guide <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>CI/CD</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/guide/ci-cd/github-actions/" class="nav-link" aria-label="GitHub Actions"><!--[--><!--]--> GitHub Actions <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/guide/ci-cd/gitlab-ci/" class="nav-link" aria-label="GitLab CI"><!--[--><!--]--> GitLab CI <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Deploy"><span class="title">Deploy</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Deploy"><span class="title">Deploy</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/deploy/aws/" class="nav-link" aria-label="AWS"><!--[--><!--]--> AWS <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/deploy/raspi/" class="nav-link" aria-label="Raspberry Pi"><!--[--><!--]--> Raspberry Pi <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/deploy/digital-ocean/" class="nav-link" aria-label="DigitalOcean"><!--[--><!--]--> DigitalOcean <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/deploy/heroku/" class="nav-link" aria-label="Heroku"><!--[--><!--]--> Heroku <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/intro/" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/zh/" class="nav-link" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/briancaffey/django-step-by-step" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">Project Introduction</p><ul class=""><li><!--[--><a aria-current="page" href="/intro/#tl-dr" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="tl;dr"><!--[--><!--]--> tl;dr <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/intro/#core-application" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Core application"><!--[--><!--]--> Core application <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/intro/#implementation" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Implementation"><!--[--><!--]--> Implementation <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/intro/#local-development" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Local development"><!--[--><!--]--> Local development <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/intro/#makefile" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Makefile"><!--[--><!--]--> Makefile <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/intro/#python-dependencies" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Python dependencies"><!--[--><!--]--> Python dependencies <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/intro/#developing-with-virtual-environments" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Developing with virtual environments"><!--[--><!--]--> Developing with virtual environments <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/intro/#developing-with-docker" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Developing with docker"><!--[--><!--]--> Developing with docker <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/intro/#e2e-testing-with-cypress" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="e2e testing with Cypress"><!--[--><!--]--> e2e testing with Cypress <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/intro/#continuous-intergration" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Continuous Intergration"><!--[--><!--]--> Continuous Intergration <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/intro/#deployment" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Deployment"><!--[--><!--]--> Deployment <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/intro/#heroku" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Heroku"><!--[--><!--]--> Heroku <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/intro/#aws-ecs" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="AWS ECS"><!--[--><!--]--> AWS ECS <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/intro/#this-project-is-open-source-and-mit-licensed" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="This project is open source and MIT Licensed"><!--[--><!--]--> This project is open source and MIT Licensed <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="project-introduction" tabindex="-1"><a class="header-anchor" href="#project-introduction" aria-hidden="true">#</a> Project Introduction</h1><p>This is a Django reference project showing how to develop and deploy Django applications using multiple tools and methodologies with best practices and consice examples.</p><h2 id="tl-dr" tabindex="-1"><a class="header-anchor" href="#tl-dr" aria-hidden="true">#</a> tl;dr</h2><p>This project implements a simple blog app using vanilla Django function-based views and class-based views as well as DRF function and class-based views. There is also an implementation of the same application using GraphQL. The application involves a simple data model including users, posts with text and image and post likes. Local development using virtual environments and docker are both covered in detail, including guidance on how to run the application on different operating systems (Linux, Intel Mac, M1 Mac, Windows, WSL). There is 100% test coverage for the project and comprehensive e2e tests using Cypress. The project can be deployed to multiple production environments including Heroku and AWS. Deployment to AWS environment on Elastic Container Service (ECS) is powered by CDK and <a href="https://github.com/briancaffey/django-cdk" target="_blank" rel="noopener noreferrer">a CDK construct library that I wrote specifically for deploying containerized Django projects on AWS<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><p>This project is originally designed as a reference or example project that I can use when I need to recall common patterns, syntax and frequently-used code snippets. I have tried to carefully document each part of the development process as a guide for someone who wants to learn how this project is built and deployed from the ground up. Please see <a href="/intro/STEP_BY_STEP.html" class="">/STEP_BY_STEP.md</a> for a complete explination of the project, step-by-step. The last part of the article goes over the 12 Factor App principles and how this project conforms to those principles.</p><p>This project is open-source and new-comers to Django and Python and welcome to create issues and pull requests.</p><h2 id="core-application" tabindex="-1"><a class="header-anchor" href="#core-application" aria-hidden="true">#</a> Core application</h2><p>This project implements a simple microblogging application called μblog. Here are some of the core features of μblog:</p><ul><li>Anyone (incuding unathenticated users) can publish posts with text and an optional image</li><li>Users can sign up for accounts that are activated by clicking a link in an email</li><li>Signed-in users can like posts</li><li>Signed-in users can edit and delete their own posts</li></ul><h2 id="implementation" tabindex="-1"><a class="header-anchor" href="#implementation" aria-hidden="true">#</a> Implementation</h2><p>μblog&#39;s core microblogging application is implemented in 5 different ways:</p><ul><li>Django function-based views</li><li>Django class-based views</li><li>Django REST Framework function-based views</li><li>Django REST Framework class-based views</li><li>GraphQL with Graphene</li></ul><p>Each of the implementations are tested and documented with OpenAPI (Swagger UI). GraphiQL is exposed for the GraphQL API which includes documentation for queries and mutations.</p><p>Django templates and and Bootstrap are used for the function and class based Django viesw. Vue.js is used to implement the like button using AJAX (with axios).</p><h2 id="local-development" tabindex="-1"><a class="header-anchor" href="#local-development" aria-hidden="true">#</a> Local development</h2><p>This project is heavily focused on the process of setting up the development environment. This project has been tested and developed on:</p><ul><li>Ubuntu 20.04</li><li>macOS 11.4 (Apple Silicon)</li><li>Windows 10 (WSL + Docker Desktop)</li></ul><p>Windows 10 PowerShell development environment is still WIP. Here are some important features of the local development environment:</p><h3 id="makefile" tabindex="-1"><a class="header-anchor" href="#makefile" aria-hidden="true">#</a> Makefile</h3><p>A Makefile is included in the root of the project to document. This file helps to document each step of the local development environment and deployment process.</p><h3 id="python-dependencies" tabindex="-1"><a class="header-anchor" href="#python-dependencies" aria-hidden="true">#</a> Python dependencies</h3><p>This project&#39;s Python dependencies are managed with poetry. Poetry dependencies and dev-dependencies are specified in <code>pyproject.toml</code>. These dependencies are exported to two files:</p><ul><li><code>requirements.txt</code>: This contains only the dependencies that are required by the project for running in production</li><li><code>requirements_dev.txt</code>: This contains all the dependencies that are required for running in production and for local development</li></ul><h3 id="developing-with-virtual-environments" tabindex="-1"><a class="header-anchor" href="#developing-with-virtual-environments" aria-hidden="true">#</a> Developing with virtual environments</h3><p>The application can be developed with a virtual environment locally. This requires starting postgres and redis services locally. Alternatively, postgres, redis and other supporting services can be started with a docker-compose file that exposes the services on <code>localhost</code>.</p><h3 id="developing-with-docker" tabindex="-1"><a class="header-anchor" href="#developing-with-docker" aria-hidden="true">#</a> Developing with docker</h3><p>Docker is a popular choice for developing and deploying applications, including Django. docker-compose can be used to run the application and dependent services in containers. See <code>docker-compose.yml</code> in the root directory for more details.</p><p>The docker-compose file contains the following services:</p><ul><li>postgres: Postgres service</li><li>redis: Redis service</li><li>pgadmin: Postgres admin service</li><li>redis-commander: Redis admin service</li><li>backend: main Django web application</li><li>celery_default: celery worker that processes the default queue</li><li>beat: celery process that queues tasks on a schedule</li><li>mailhog: a local SMTP server for testing</li></ul><p>The application can also run locally inside a local Kubernetes cluster. This is made possible with minikube. cdk8s and pulumi are both used to show how kubernetes manifest files can be generated dynamically from code (TypeScript) and deployed to a cluster.</p><h3 id="e2e-testing-with-cypress" tabindex="-1"><a class="header-anchor" href="#e2e-testing-with-cypress" aria-hidden="true">#</a> e2e testing with Cypress</h3><p>Cypress is used for e2e testing which can run locally against the docker-compose development environment. To test user registration and email verification in e2e tests, MailHog and the MailHog API are used to retrieve the email confirmation link from the email sent by the Django application.</p><h2 id="continuous-intergration" tabindex="-1"><a class="header-anchor" href="#continuous-intergration" aria-hidden="true">#</a> Continuous Intergration</h2><p>Multiple tools are used for running unit tests and code quality checks on each commit. These include:</p><ul><li>GitHub Actions</li><li>GitLab CI</li><li>CircleCI</li><li>Bitbucket Pipelines</li></ul><p>Continuous integration checks that all unit tests pass and that code is formatted correctly. Unit tests run the Python code in a simulated environment that contains the dependent services (postgres and redis). The following tools are used in CI:</p><ul><li>flake8</li><li>black</li><li>pytest</li></ul><h2 id="deployment" tabindex="-1"><a class="header-anchor" href="#deployment" aria-hidden="true">#</a> Deployment</h2><p>This project can be deployed to multiple live environments including:</p><ul><li>Heroku</li><li>AWS ECS</li><li>AWS EKS</li><li>docker swarm cluster (planned)</li></ul><h3 id="heroku" tabindex="-1"><a class="header-anchor" href="#heroku" aria-hidden="true">#</a> Heroku</h3><p>This project uses media files, which is a common component of most Django applications. Heroku cannot host media files, so AWS is used to host media files instead. Setting up media file usage on AWS involves setting up:</p><ul><li>An S3 bucket</li><li>An IAM user with correct permissions needed to interact with the bucket&#39;s resources</li></ul><p>The creation of the S3 bucket and the IAM user can be automated using Infrasturcture as Code. A CDK construct from the <code>django-cdk</code> project is used to deploy the resource, and then environment variables are added to Heroku in order for the application to use the S3 bucket.</p><h3 id="aws-ecs" tabindex="-1"><a class="header-anchor" href="#aws-ecs" aria-hidden="true">#</a> AWS ECS</h3><p>ECS is my preferred way of running containerized web applications on AWS. To help document best practices for deploying Django applications on ECS, I wrote a reusable CDK construct library that handles infrastructure provisioning for typical deployment scenarios. This project can be found <a href="https://github.com/briancaffey/django-cdk" target="_blank" rel="noopener noreferrer">here<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><p>The Django ECS construct included in the library creates the following AWS resources:</p><ul><li>VPC (public, private and isolated subnets, NAT Gateways, routing tables, Internet Gateway, etc)</li><li>S3 bucket for storing static files and media files</li><li>ECS Cluster (a grouping of ECS resources)</li><li>ECS tasks and services for various components of the application (web, celery workers, management commands and tasks)</li><li>A docker image built from our Django application code and specified Dockerfile</li><li>Application Load Balancer</li><li>TLS certificate that can attached to the Application Load Balancer terminating SSL/TLS</li><li>A Route53 DNS record that points to the Application Load Balancer public DNS name</li><li>AWS RDS Postgres database instance that servers as the database for the Django application</li><li>A single-node AWS ElastiCache Redis cluster that provides caching and messaging brokering for celery workers</li><li>Secrurity groups that allow for the stateless application layer to communicate with the Postgres database and Redis cluster</li><li>Automated database migrations for the Django application using ECS tasks</li></ul><p>The Django ECS construct takes a few inputs, including:</p><ul><li>The path to the Django application code</li><li>The path to the Dockerfile that defines the main image used for the Django application</li><li>The domain name in Route53 that will be used to generate DNS records in your account</li><li>Optionally provide the ARN of an ACM certificate to be attached to the Application Load Balancer</li><li>A list of strings to be used as the command for the web service</li><li>A list of strings to be used as the command for the celery workers</li><li>A list of strings to be used as the command for the celery beat process</li></ul><p>This project can deploy ECS from the command line (using <code>make cdk-deploy</code>) or from a CI/CD pipeline. GitHub Actions and GitLab CI both include pipeline stages that deploy the application to AWS ECS.</p><p>Additional <a href="https://aws.amazon.com/blogs/containers/new-using-amazon-ecs-exec-access-your-containers-fargate-ec2/" target="_blank" rel="noopener noreferrer">ECS Exec<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> is used to run management commands and open shells inside of the containers running on Fargate.</p><h2 id="this-project-is-open-source-and-mit-licensed" tabindex="-1"><a class="header-anchor" href="#this-project-is-open-source-and-mit-licensed" aria-hidden="true">#</a> This project is open source and MIT Licensed</h2><p>See <a href="/LICENSE.html" class="">LICENSE.md</a></p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/briancaffey/django-step-by-step/edit/main/vuepress-docs/docs/intro/README.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub"><!--[--><!--]--> Edit this page on GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">8/1/2021, 8:04:15 PM</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: briancaffey2010@gmail.com">Brian Caffey</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.40c5ecb7.js" defer></script><script src="/assets/js/646.53e051e1.js" defer></script><script src="/assets/js/app.62082096.js" defer></script>
  </body>
</html>
