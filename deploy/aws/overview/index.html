<!DOCTYPE html>
<html lang="en-US">
  <head>
    <link rel="manifest" href="/manifest.webmanifest"><meta name="theme-color" content="#3eaf7c"><link rel="icon" type="image/png" sizes="16x16" href="/images/ublog.png"><title>How to deploy μblog on AWS | μblog docs</title><meta name="description" content="documentation for μblog, a reference web application built with Django and Vue.js"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.23">
    <link rel="preload" href="/django-step-by-step/assets/js/runtime~app.04b5dff0.js" as="script"><link rel="preload" href="/django-step-by-step/assets/css/styles.592d94e4.css" as="style"><link rel="preload" href="/django-step-by-step/assets/js/981.12928b34.js" as="script"><link rel="preload" href="/django-step-by-step/assets/js/app.be7711e5.js" as="script">
    <link rel="stylesheet" href="/django-step-by-step/assets/css/styles.592d94e4.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/django-step-by-step/" class=""><img class="logo" src="/django-step-by-step/images/ublog.png" alt="μblog docs"><span class="site-name can-hide">μblog docs</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/django-step-by-step/intro" class="nav-link" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Topics"><span class="title">Topics</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Topics"><span class="title">Topics</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/django-step-by-step/topics/twelve-factor-app" class="nav-link" aria-label="Twelve-Factor App"><!--[--><!--]--> Twelve-Factor App <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/django/" class="nav-link" aria-label="Django Application"><!--[--><!--]--> Django Application <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/quasar/" class="nav-link" aria-label="Quasar Application"><!--[--><!--]--> Quasar Application <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/docker-compose/" class="nav-link" aria-label="Docker Compose"><!--[--><!--]--> Docker Compose <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/jwt-authentication/" class="nav-link" aria-label="Authentication"><!--[--><!--]--> Authentication <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/vuepress/" class="nav-link" aria-label="VuePress Documentation"><!--[--><!--]--> VuePress Documentation <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/django-step-by-step/guide/step-by-step/" class="nav-link" aria-label="Step by step guide"><!--[--><!--]--> Step by step guide <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>CI/CD</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/django-step-by-step/guide/ci-cd/github-actions/" class="nav-link" aria-label="GitHub Actions"><!--[--><!--]--> GitHub Actions <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/guide/ci-cd/gitlab-ci/" class="nav-link" aria-label="GitLab CI"><!--[--><!--]--> GitLab CI <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Deploy"><span class="title">Deploy</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Deploy"><span class="title">Deploy</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/django-step-by-step/deploy/overview/" class="nav-link" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/raspi/" class="nav-link" aria-label="Raspberry Pi"><!--[--><!--]--> Raspberry Pi <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/digital-ocean/" class="nav-link" aria-label="DigitalOcean"><!--[--><!--]--> DigitalOcean <!--[--><!--]--></a></li><li class="dropdown-subitem"><a aria-current="page" href="/django-step-by-step/deploy/aws/overview" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="AWS Overview"><!--[--><!--]--> AWS Overview <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/aws/docker-swarm-ec2/" class="nav-link" aria-label="Docker Swarm on EC2"><!--[--><!--]--> Docker Swarm on EC2 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/zh/" class="nav-link" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/briancaffey/django-step-by-step" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/django-step-by-step/intro" class="nav-link" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Topics"><span class="title">Topics</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Topics"><span class="title">Topics</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/django-step-by-step/topics/twelve-factor-app" class="nav-link" aria-label="Twelve-Factor App"><!--[--><!--]--> Twelve-Factor App <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/django/" class="nav-link" aria-label="Django Application"><!--[--><!--]--> Django Application <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/quasar/" class="nav-link" aria-label="Quasar Application"><!--[--><!--]--> Quasar Application <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/docker-compose/" class="nav-link" aria-label="Docker Compose"><!--[--><!--]--> Docker Compose <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/jwt-authentication/" class="nav-link" aria-label="Authentication"><!--[--><!--]--> Authentication <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/vuepress/" class="nav-link" aria-label="VuePress Documentation"><!--[--><!--]--> VuePress Documentation <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/django-step-by-step/guide/step-by-step/" class="nav-link" aria-label="Step by step guide"><!--[--><!--]--> Step by step guide <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>CI/CD</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/django-step-by-step/guide/ci-cd/github-actions/" class="nav-link" aria-label="GitHub Actions"><!--[--><!--]--> GitHub Actions <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/guide/ci-cd/gitlab-ci/" class="nav-link" aria-label="GitLab CI"><!--[--><!--]--> GitLab CI <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Deploy"><span class="title">Deploy</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Deploy"><span class="title">Deploy</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/django-step-by-step/deploy/overview/" class="nav-link" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/raspi/" class="nav-link" aria-label="Raspberry Pi"><!--[--><!--]--> Raspberry Pi <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/digital-ocean/" class="nav-link" aria-label="DigitalOcean"><!--[--><!--]--> DigitalOcean <!--[--><!--]--></a></li><li class="dropdown-subitem"><a aria-current="page" href="/django-step-by-step/deploy/aws/overview" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="AWS Overview"><!--[--><!--]--> AWS Overview <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/aws/docker-swarm-ec2/" class="nav-link" aria-label="Docker Swarm on EC2"><!--[--><!--]--> Docker Swarm on EC2 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/zh/" class="nav-link" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/briancaffey/django-step-by-step" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">How to deploy μblog on AWS</p><ul class=""><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#about-django-cdk" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="About django-cdk"><!--[--><!--]--> About django-cdk <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#django-cdk-constructs" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="django-cdk constructs"><!--[--><!--]--> django-cdk constructs <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#about-cdk-constructs" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="About CDK constructs"><!--[--><!--]--> About CDK constructs <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#features-of-the-djangovue-djangoecs-and-staticsite-constructs" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Features of the DjangoVue, DjangoEcs and StaticSite constructs"><!--[--><!--]--> Features of the DjangoVue, DjangoEcs and StaticSite constructs <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#djangovue-resources" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="DjangoVue resources"><!--[--><!--]--> DjangoVue resources <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#configuring-django-and-vue-to-use-the-same-domain-and-subdomain" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Configuring Django and Vue to use the same domain and subdomain"><!--[--><!--]--> Configuring Django and Vue to use the same domain and subdomain <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#automatic-commands" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Automatic commands"><!--[--><!--]--> Automatic commands <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#ecs-exec" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ECS Exec"><!--[--><!--]--> ECS Exec <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#django-cdk-documentation" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="django-cdk documentation"><!--[--><!--]--> django-cdk documentation <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#using-the-constructs" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Using the constructs"><!--[--><!--]--> Using the constructs <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#djangoeks" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="DjangoEks"><!--[--><!--]--> DjangoEks <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#ecs" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="ECS"><!--[--><!--]--> ECS <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#key-differences-between-ecs-and-eks-constructs" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Key differences between ECS and EKS constructs"><!--[--><!--]--> Key differences between ECS and EKS constructs <!--[--><!--]--></a><ul class="sidebar-sub-items"><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#container-orchestration" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Container orchestration"><!--[--><!--]--> Container orchestration <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#load-balancer" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Load Balancer"><!--[--><!--]--> Load Balancer <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#compute" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Compute"><!--[--><!--]--> Compute <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#projen" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="projen"><!--[--><!--]--> projen <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#development" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Development"><!--[--><!--]--> Development <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#current-development-efforts" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="Current Development Efforts"><!--[--><!--]--> Current Development Efforts <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#github-discussions" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="GitHub Discussions"><!--[--><!--]--> GitHub Discussions <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="how-to-deploy-μblog-on-aws" tabindex="-1"><a class="header-anchor" href="#how-to-deploy-μblog-on-aws" aria-hidden="true">#</a> How to deploy μblog on AWS</h1><p>This page will describe how to deploy μblog on AWS using an Infrastructure as Code (IAC) tool called AWS CloudDevelopment Kit (CDK).</p><nav class="table-of-contents"><ul><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#about-django-cdk" class="router-link-active router-link-exact-active">About django-cdk</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#django-cdk-constructs" class="router-link-active router-link-exact-active">django-cdk constructs</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#about-cdk-constructs" class="router-link-active router-link-exact-active">About CDK constructs</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#features-of-the-djangovue-djangoecs-and-staticsite-constructs" class="router-link-active router-link-exact-active">Features of the DjangoVue, DjangoEcs and StaticSite constructs</a><ul><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#djangovue-resources" class="router-link-active router-link-exact-active">DjangoVue resources</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#configuring-django-and-vue-to-use-the-same-domain-and-subdomain" class="router-link-active router-link-exact-active">Configuring Django and Vue to use the same domain and subdomain</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#automatic-commands" class="router-link-active router-link-exact-active">Automatic commands</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#ecs-exec" class="router-link-active router-link-exact-active">ECS Exec</a></li></ul></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#django-cdk-documentation" class="router-link-active router-link-exact-active">django-cdk documentation</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#using-the-constructs" class="router-link-active router-link-exact-active">Using the constructs</a><ul><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#djangoeks" class="router-link-active router-link-exact-active">DjangoEks</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#ecs" class="router-link-active router-link-exact-active">ECS</a></li></ul></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#key-differences-between-ecs-and-eks-constructs" class="router-link-active router-link-exact-active">Key differences between ECS and EKS constructs</a><ul><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#container-orchestration" class="router-link-active router-link-exact-active">Container orchestration</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#load-balancer" class="router-link-active router-link-exact-active">Load Balancer</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#compute" class="router-link-active router-link-exact-active">Compute</a></li></ul></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#projen" class="router-link-active router-link-exact-active">projen</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#development" class="router-link-active router-link-exact-active">Development</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#current-development-efforts" class="router-link-active router-link-exact-active">Current Development Efforts</a></li><li><a aria-current="page" href="/django-step-by-step/deploy/aws/overview/#github-discussions" class="router-link-active router-link-exact-active">GitHub Discussions</a></li></ul></nav><h2 id="about-django-cdk" tabindex="-1"><a class="header-anchor" href="#about-django-cdk" aria-hidden="true">#</a> About <a href="https://github.com/briancaffey/django-cdk" target="_blank" rel="noopener noreferrer"><code>django-cdk</code><span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></h2><p><code>django-cdk</code> is a library for that includes constructs for deploying Django applications on AWS, focusing on containerization and serverless. <code>django-cdk</code> code lives on GitHub, and the package can be used with CDK in both Python and JavaScript/TypeScript CDK applications. Here are links for <code>django-cdk</code>:</p><ul><li><a href="https://github.com/briancaffey/django-cdk" target="_blank" rel="noopener noreferrer">https://github.com/briancaffey/django-cdk<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> - GitHub</li><li><a href="https://www.npmjs.com/package/django-cdk" target="_blank" rel="noopener noreferrer">https://www.npmjs.com/package/django-cdk<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> - NPM</li><li><a href="https://pypi.org/project/django-cdk/" target="_blank" rel="noopener noreferrer">https://pypi.org/project/django-cdk/<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> - PyPI</li></ul><h2 id="django-cdk-constructs" tabindex="-1"><a class="header-anchor" href="#django-cdk-constructs" aria-hidden="true">#</a> <code>django-cdk</code> constructs</h2><ul><li><code>DjangoEcs</code></li><li><code>DjangoEks</code> (almost complete)</li><li><code>StaticSite</code> (Vue, React, etc.)</li><li><code>DjangoVue</code> (combines the <code>Django ECS</code> and <code>Static Site</code> constructs, the easiest way to deploy all components of μblog)</li><li><code>DockerEc2</code> (complete)</li><li><code>S3BucketResources</code> S3 bucket and IAM user (useful if you are hosting your Django application outside of AWS, such as on DigitalOcean)</li></ul><h2 id="about-cdk-constructs" tabindex="-1"><a class="header-anchor" href="#about-cdk-constructs" aria-hidden="true">#</a> About CDK constructs</h2><p>Here are some important points that will give some important context around CDK and IaC on AWS:</p><ul><li>CDK is an AWS tool that allows you to write Infrastructure as Code</li><li>CDK generates CloudFormation (JSON/YAML that defines AWS resources at a low level)</li><li>CDK contains different levels of constructs that can be used to generate CloudFormation: <ul><li>L1 (Level 1) CDK constructs are a 1:1 mapping from CDK to CloudFormation resources. They are prefixed with <code>Cfn</code> (e.g. <code>s3.CfnBucket</code>)</li><li>L2 CDK constructs are abstractions that generate several related CloudFormation resources that help support a single AWS resource or a group of related resource. For example, the L2 CDK construct for creating a VPC generates CloudFormation for a VPC, a subnet, and a NAT Gateway, routing tables and other related resources.</li><li>L3 CDK constructs generate groups of resources. For example, the L3 CDK construct for creating a load-balanced web services generates CloudFormation for an ECS service, a load balancer and related target groups.</li></ul></li></ul><p>The resources in <code>django-cdk</code> can be thought of as <code>L4</code> constructs. A single construct will contain all of the resources needed to create an application that has a number of different resources.</p><h2 id="features-of-the-djangovue-djangoecs-and-staticsite-constructs" tabindex="-1"><a class="header-anchor" href="#features-of-the-djangovue-djangoecs-and-staticsite-constructs" aria-hidden="true">#</a> Features of the <code>DjangoVue</code>, <code>DjangoEcs</code> and <code>StaticSite</code> constructs</h2><p><code>DjangoVue</code> is the highest-level construct in the library. It combines two other constructs in the library: <code>DjangoEcs</code> and <code>StaticSite</code>.</p><h3 id="djangovue-resources" tabindex="-1"><a class="header-anchor" href="#djangovue-resources" aria-hidden="true">#</a> <code>DjangoVue</code> resources</h3><p><code>DjangoVue</code> deploys the following resources:</p><ul><li>VPC (Subnets, Security Groups, AZs, NAT Gateway)</li><li>Application Load Balancer</li><li>ECS cluster, services and tasks for the Django API server and celery workers</li><li>Postgres databases</li><li>Static site for a Single Page Application deployed with CloudFront and S3</li><li>Route 53 DNS records</li><li>Certificate Manager certificates</li><li>IAM roles and policies</li><li>Outputs that provide commands for allowing an AWS admin to access an interactive shell running in a serverless container</li><li>Optional automatic commands (useful if you want to run Django migrations or collect static on each deploy)</li></ul><h3 id="configuring-django-and-vue-to-use-the-same-domain-and-subdomain" tabindex="-1"><a class="header-anchor" href="#configuring-django-and-vue-to-use-the-same-domain-and-subdomain" aria-hidden="true">#</a> Configuring Django and Vue to use the same domain and subdomain</h3><p>The <code>DjangoVue</code> construct deploys a CloudFront distribution that includes three different origins:</p><ul><li>Static Site Bucket (serves Vue SPA assets)</li><li>Application Load Balancer DNS Name</li><li>Django assets S3 Bucket (static and media files for the Django application)</li></ul><p>This allows for Django and Vue to use the same domain and subdomain. Assuming that you have a Route 53 domain called <code>domain.com</code>, CloudFront will route requests as follows:</p><ul><li><code>app.domain.com/{api,admin,graphql}/</code> requests will be routed to the load balancer</li><li><code>app.domain.com/{static,media}/</code> requests will be routed to the assets bucket</li><li>all other requests to <code>app.domain.com</code> will be routed to the static site bucket (Vue SPA)</li></ul><p>One important implication of this relates to authentication: we can set an <code>HttpOnly</code> cookie on the Vue client that comes from a request to the Django API. <strong>This would not be possible if the Vue client is served on <code>app.domain.com</code> and the Django API is served on <code>api.domain.com</code>.</strong></p><h3 id="automatic-commands" tabindex="-1"><a class="header-anchor" href="#automatic-commands" aria-hidden="true">#</a> Automatic commands</h3><p>The CDK allows you to define Custom Resources that can either:</p><ul><li>run an AWS JavaScript SDK command</li><li>run a Lambda function that does something</li></ul><p>The <code>DjangoEcs</code> construct optionally defines custom resources that can run ECS tasks for running Django management commands that you might want run on each deployment such as:</p><ul><li><code>python manage.py migrate --no-input</code></li><li><code>python manage.py collectstatic --no-input</code></li></ul><h3 id="ecs-exec" tabindex="-1"><a class="header-anchor" href="#ecs-exec" aria-hidden="true">#</a> ECS Exec</h3><p>ECS Exec is a new feature of ECS that allows you to open a shell in a container running on ECS Fargate.</p><p>Here are some helpful links for more information about ECS Exec:</p><ul><li><a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/ecs-exec.html" target="_blank" rel="noopener noreferrer">AWS Developer Guide<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><a href="https://github.com/pahud/ecs-exec-cdk-demo" target="_blank" rel="noopener noreferrer">ecs-exec-cdk-demo repo from pahud<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><h2 id="django-cdk-documentation" tabindex="-1"><a class="header-anchor" href="#django-cdk-documentation" aria-hidden="true">#</a> <code>django-cdk</code> documentation</h2><p>Documentation for <code>django-cdk</code> is generated automatically from the source code. The most up-to-date documentation for using <code>django-cdk</code> constructs can be found here: <a href="https://github.com/briancaffey/django-cdk/blob/main/API.md" target="_blank" rel="noopener noreferrer">https://github.com/briancaffey/django-cdk/blob/main/API.md<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><p>To use one of the constructs you need to provide:</p><ul><li>A path to the root of your Django project</li><li>The location of the <code>Dockerfile</code> used to build your application&#39;s image (for EKS and ECS) relative to your Django project&#39;s root directory</li><li>The commands used to start the process that run your application: <ul><li>web server process (required)</li><li>celery (optional)</li><li>celery beat (optional)</li></ul></li><li>Options for how to run the application and which additional services your application requires</li></ul><p>If you are hosting your application outside of AWS, there is also a construct that can be used for provisioning a new S3 bucket along with an IAM user with the necessary permissions to access it. This can be used for hosting static files as well as media files.</p><h2 id="using-the-constructs" tabindex="-1"><a class="header-anchor" href="#using-the-constructs" aria-hidden="true">#</a> Using the constructs</h2><p>This repository includes sample CDK applications that use the libraries.</p><h3 id="djangoeks" tabindex="-1"><a class="header-anchor" href="#djangoeks" aria-hidden="true">#</a> DjangoEks</h3><p>Overview of the EKS construct:</p><img src="/django-step-by-step/diagrams/django-cdk.png" alt="django cdk ecs"><p>1 - Resource in this diagram are defined by a CDK construct library called <code>django-eks</code> which is written in TypeScript and published to PyPi and npmjs.org. The project is managed by projen.</p><p>2 - The project uses jsii to transpile Typescript to Python, and the project is published to both PyPI and npm.</p><p>3 - The library is imported in a CDK application that is written in either TypeScript or Python.</p><p>4 - The CDK application is synthesized into CloudFormation templates which are used to build a CloudFormation stack that will contain all of the resources defined in the contstruct.</p><p>5 - An ECR registry is created when running <code>cdk bootstrap</code>, and it is used to store docker images that the application builds and later uses.</p><p>6 - An S3 bucket is also created by the <code>cdk bootstrap</code> command. This bucket is used for storing assets needed by CDK.</p><p>7 - The VPC is a the skeleton of the application. The CDK construct used for creating the VPC in our application sets up several resources including subnets, NAT gateways, internet gateway, route tables, etc.</p><p>8 - The Route53 record points to the Application Load Balancer (ALB) that routes traffic to our application. The record is created indirectly by CDK; external-dns creates the A Record resource based on annotations on the ALB.</p><p>9 - The Internet Gateway attached to our VPC</p><p>10 - The Application Load Balancer that is created by the AWS Load Balancer Controller</p><p>11 - EKS, the container orchestration layer in our application. AWS manages the control plane</p><p>12 - OpenIDConnect Provider used for handling permissions between pods and other AWS resources</p><p>13 - This is a node in the default node group of the EKS cluster</p><p>14 - The app namespace is where our application&#39;s Kubernetes resources will be deployed</p><p>15 - The Ingress that Routes traffic to the service for the Django application</p><p>16 - The service for the Django application</p><p>17 - The deployment/pods for the Django application. These pods have a service account that will give it access to other AWS resources through IRSA</p><p>18 - The deployment/pods for the celery workers in the Django application</p><p>19 - The IAM role and service account that are attached to the pods in our application. The service account is annotated with the IAM role&#39;s ARN (IRSA).</p><p>20 - external-dns is installed in our cluster to a dedicated namespace called external-dns. It is responsible for creating the Route53 record that points to the ALB. In future version of AWS Load Balancer Controller, external-dns may not be necessary.</p><p>21 - AWS Load Balancer Controller is installed into the kube-system namespace. This controller is responsible for provisioning an AWS Load Balancer when an Ingress object is deployed to the EKS cluster.</p><p>22 - RDS Postgres Instance that is placed in an isolated subnet. The security group for the default node group has access to the security group where the RDS instance is placed in an isolated subnet.</p><p>23 - Secrets Manager is used to provide the database password. The pods that run the Django application have access to the database secret in Secrets Manager, and they request it via a library that wraps boto3 calls and also caches secrets to reduce calls to secrets manager.</p><p>24 - ElastiCache Redis instance handles application caching and serves as the message broker for celery.</p><p>25 - Since the application runs in private subnets, outbound traffic is sent through NAT Gateways (Network Adress Translation) in public subnets that can be routed back to the public internet.</p><p>26 - An S3 bucket that our application can use for storing media assets.</p><p>Here&#39;s an example from <code>src/integ.django-eks.ts</code>:</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> cdk <span class="token keyword">from</span> <span class="token string">&quot;@aws-cdk/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DjangoEks <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./index&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> env <span class="token operator">=</span> <span class="token punctuation">{</span>
  region<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">AWS_DEFAULT_REGION</span> <span class="token operator">||</span> <span class="token string">&quot;us-east-1&quot;</span><span class="token punctuation">,</span>
  account<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">AWS_ACCOUNT_ID</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">cdk</span><span class="token punctuation">.</span><span class="token function">App</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">cdk</span><span class="token punctuation">.</span><span class="token function">Stack</span><span class="token punctuation">(</span>app<span class="token punctuation">,</span> <span class="token string">&quot;DjangoEks&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> env <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> construct <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DjangoEks</span><span class="token punctuation">(</span>stack<span class="token punctuation">,</span> <span class="token string">&quot;Cdk-Sample-Lib&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  imageDirectory<span class="token operator">:</span> <span class="token string">&quot;./test/django-step-by-step/backend&quot;</span><span class="token punctuation">,</span>
  webCommand<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./scripts/start_prod.sh&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * Add tagging for this construct and all child constructs
 */</span>
cdk<span class="token punctuation">.</span>Tags<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>construct<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;stack&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;MyStack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>This sample application (and others defined in the <code>integ.*.ts</code> files in this repo) can be easily deployed for testing purposes with targets defined in the <code>Makefile</code>. To deploy the above application, you can run:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>npm run build
make deploy-eks
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Destroy the application with:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>make destroy-eks
</code></pre><div class="line-numbers"><span class="line-number">1</span><br></div></div><p>This assumes that you have credentials configured in your AWS CLI with sufficient permissions and that you have <a href="https://docs.aws.amazon.com/cdk/latest/guide/bootstrapping.html" target="_blank" rel="noopener noreferrer">bootstrapped your AWS account<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>. You will also need to have docker CLI configured in order for CDK to build images and push them to ECR.</p><h3 id="ecs" tabindex="-1"><a class="header-anchor" href="#ecs" aria-hidden="true">#</a> ECS</h3><img src="/django-step-by-step/diagrams/django-ecs.png" alt="docker-compose"><p>The ECS construct uses the <code>ApplicationLoadBalancedFargateService</code> construct from <code>@aws-cdk/aws-ecs-patterns</code>. This is a powerful abstraction that handles a lot of the networking requirements for the construct.</p><h2 id="key-differences-between-ecs-and-eks-constructs" tabindex="-1"><a class="header-anchor" href="#key-differences-between-ecs-and-eks-constructs" aria-hidden="true">#</a> Key differences between ECS and EKS constructs</h2><p>The ECS and EKS constructs aim to do the same thing: deploy containerized applications to AWS.</p><h3 id="container-orchestration" tabindex="-1"><a class="header-anchor" href="#container-orchestration" aria-hidden="true">#</a> Container orchestration</h3><p>The ECS constructs uses Amazon&#39;s proprietary, closed-source container orchestration tool called ECS. The EKS construct uses an <a href="https://github.com/aws/eks-distro" target="_blank" rel="noopener noreferrer">open source distribution of Kubernetes<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> called Amazon EKS Distro (EKS-D).</p><h3 id="load-balancer" tabindex="-1"><a class="header-anchor" href="#load-balancer" aria-hidden="true">#</a> Load Balancer</h3><p>Another important difference from an infrastructure and Infrastructure as Code (IaC) perspective is the use of Application Load Balancers (ALBs).</p><blockquote><p>The load balancer distributes incoming application traffic across multiple targets, such as EC2 instances, in multiple Availability Zones.</p></blockquote><p>The ECS and EKS constructs go about provisioning ALBs differently. In the ECS construct, the <code>ApplicationLoadBalancedFargateService</code> in the CDK code results in CloudFormation code that requests an application load balancer.</p><p>The EKS construct does not directly request an ALB. Instead, it installs the <a href="https://docs.aws.amazon.com/eks/latest/userguide/aws-load-balancer-controller.html" target="_blank" rel="noopener noreferrer">AWS Load Balancer Controller<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>, <a href="https://github.com/kubernetes-sigs/aws-load-balancer-controller" target="_blank" rel="noopener noreferrer">an open source project<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>, using a Helm chart. This controller satisfies Kubernetes Ingress resources by provisioning Application Load Balancers. The contruct defines a Kubernetes Ingress object which, when deployed to the EKS cluster, causes the AWS Load Balancer Controller to provision an ALB. You can read more about Kubernetes Controllers <a href="https://kubernetes.io/docs/concepts/architecture/controller/#direct-control" target="_blank" rel="noopener noreferrer">here<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><p>The Ingress object defined in the construct uses <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/" target="_blank" rel="noopener noreferrer">annotations<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> that the controller processes when provisioning the ALB. A list of all supported annotations can be found <a href="https://kubernetes-sigs.github.io/aws-load-balancer-controller/v2.2/guide/ingress/annotations/#annotations" target="_blank" rel="noopener noreferrer">here on the AWS Load Balancer Controller website<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><h3 id="compute" tabindex="-1"><a class="header-anchor" href="#compute" aria-hidden="true">#</a> Compute</h3><p>One other important difference between the two constructs is the type of compute used to run the container workloads. The ECS construct uses Fargate, a serverless computer offering from AWS. The EKS construct uses EC2 instances for the worker nodes of the EKS cluster. It is possible to use Fargate with EKS, but AWS currently recommends not using Fargate for sensitive workloads on EKS.</p><h2 id="projen" tabindex="-1"><a class="header-anchor" href="#projen" aria-hidden="true">#</a> projen</h2><p>This project uses <a href="https://github.com/projen/projen" target="_blank" rel="noopener noreferrer">projen<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><blockquote><p>projen synthesizes project configuration files such as package.json, tsconfig.json, .gitignore, GitHub Workflows, eslint, jest, etc from a well-typed definition written in JavaScript.</p></blockquote><h2 id="development" tabindex="-1"><a class="header-anchor" href="#development" aria-hidden="true">#</a> Development</h2><p>For development of this library, a sample Django application is included as a git submodule in <code>test/django-step-by-step</code>. This Django project is used when deploying the application, and can be replaced with your own project for testing purposes. See the <code>Makefile</code> in the <code>django-cdk</code> repository for some commonly used</p><h2 id="current-development-efforts" tabindex="-1"><a class="header-anchor" href="#current-development-efforts" aria-hidden="true">#</a> Current Development Efforts</h2><p>This project is under active development. Here are some issues that need to be addressed:</p><ul><li>Media file uploads are currently broken, this needs to be fixed</li><li>Go over this Kubernetes checklist: <a href="https://www.weave.works/blog/production-ready-checklist-kubernetes" target="_blank" rel="noopener noreferrer">https://www.weave.works/blog/production-ready-checklist-kubernetes<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li>Add snapshot tests and refactor the application</li><li>Add unit tests</li><li>Add autoscaling rules to <code>DjangoEcs</code> for horizontal scaling and do load-testing</li></ul><h2 id="github-discussions" tabindex="-1"><a class="header-anchor" href="#github-discussions" aria-hidden="true">#</a> GitHub Discussions</h2><p>If you have any questions about the <code>django-cdk</code> construct library, please start a Discussion on the GitHub repo: <a href="https://github.com/briancaffey/django-cdk/discussions" target="_blank" rel="noopener noreferrer">https://github.com/briancaffey/django-cdk/discussions<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a>.</p><p>You can also open an issue: <a href="https://github.com/briancaffey/django-cdk/issues/new" target="_blank" rel="noopener noreferrer">https://github.com/briancaffey/django-cdk/issues/new<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/briancaffey/django-step-by-step/edit/main/vuepress-docs/docs/deploy/aws/overview/README.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub"><!--[--><!--]--> Edit this page on GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">9/11/2022, 1:25:31 AM</span></div><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"> ← <a href="/django-step-by-step/deploy/digital-ocean" class="nav-link" aria-label="DigitalOcean Deployment Guide"><!--[--><!--]--> DigitalOcean Deployment Guide <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/django-step-by-step/assets/js/runtime~app.04b5dff0.js" defer></script><script src="/django-step-by-step/assets/js/981.12928b34.js" defer></script><script src="/django-step-by-step/assets/js/app.be7711e5.js" defer></script>
  </body>
</html>
