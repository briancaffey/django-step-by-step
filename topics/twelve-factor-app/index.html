<!DOCTYPE html>
<html lang="en-US">
  <head>
    <link rel="manifest" href="/manifest.webmanifest"><meta name="theme-color" content="#3eaf7c"><link rel="icon" type="image/png" sizes="16x16" href="/images/ublog.png"><title>12 Factor App | μblog docs</title><meta name="description" content="documentation for μblog, a reference web application built with Django and Vue.js"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.23">
    <link rel="preload" href="/django-step-by-step/assets/js/runtime~app.2f187f5c.js" as="script"><link rel="preload" href="/django-step-by-step/assets/css/styles.592d94e4.css" as="style"><link rel="preload" href="/django-step-by-step/assets/js/981.12928b34.js" as="script"><link rel="preload" href="/django-step-by-step/assets/js/app.be7711e5.js" as="script">
    <link rel="stylesheet" href="/django-step-by-step/assets/css/styles.592d94e4.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/django-step-by-step/" class=""><img class="logo" src="/django-step-by-step/images/ublog.png" alt="μblog docs"><span class="site-name can-hide">μblog docs</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/django-step-by-step/intro" class="nav-link" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Topics"><span class="title">Topics</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Topics"><span class="title">Topics</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="Twelve-Factor App"><!--[--><!--]--> Twelve-Factor App <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/django/" class="nav-link" aria-label="Django Application"><!--[--><!--]--> Django Application <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/quasar/" class="nav-link" aria-label="Quasar Application"><!--[--><!--]--> Quasar Application <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/docker-compose/" class="nav-link" aria-label="Docker Compose"><!--[--><!--]--> Docker Compose <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/jwt-authentication/" class="nav-link" aria-label="Authentication"><!--[--><!--]--> Authentication <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/vuepress/" class="nav-link" aria-label="VuePress Documentation"><!--[--><!--]--> VuePress Documentation <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/django-step-by-step/guide/step-by-step/" class="nav-link" aria-label="Step by step guide"><!--[--><!--]--> Step by step guide <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>CI/CD</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/django-step-by-step/guide/ci-cd/github-actions/" class="nav-link" aria-label="GitHub Actions"><!--[--><!--]--> GitHub Actions <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/guide/ci-cd/gitlab-ci/" class="nav-link" aria-label="GitLab CI"><!--[--><!--]--> GitLab CI <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Deploy"><span class="title">Deploy</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Deploy"><span class="title">Deploy</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/django-step-by-step/deploy/overview/" class="nav-link" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/raspi/" class="nav-link" aria-label="Raspberry Pi"><!--[--><!--]--> Raspberry Pi <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/digital-ocean/" class="nav-link" aria-label="DigitalOcean"><!--[--><!--]--> DigitalOcean <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/aws/overview" class="nav-link" aria-label="AWS Overview"><!--[--><!--]--> AWS Overview <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/aws/docker-swarm-ec2/" class="nav-link" aria-label="Docker Swarm on EC2"><!--[--><!--]--> Docker Swarm on EC2 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/zh/" class="nav-link" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/briancaffey/django-step-by-step" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/django-step-by-step/intro" class="nav-link" aria-label="Introduction"><!--[--><!--]--> Introduction <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Topics"><span class="title">Topics</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Topics"><span class="title">Topics</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="Twelve-Factor App"><!--[--><!--]--> Twelve-Factor App <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/django/" class="nav-link" aria-label="Django Application"><!--[--><!--]--> Django Application <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/quasar/" class="nav-link" aria-label="Quasar Application"><!--[--><!--]--> Quasar Application <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/docker-compose/" class="nav-link" aria-label="Docker Compose"><!--[--><!--]--> Docker Compose <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/jwt-authentication/" class="nav-link" aria-label="Authentication"><!--[--><!--]--> Authentication <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/topics/vuepress/" class="nav-link" aria-label="VuePress Documentation"><!--[--><!--]--> VuePress Documentation <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/django-step-by-step/guide/step-by-step/" class="nav-link" aria-label="Step by step guide"><!--[--><!--]--> Step by step guide <!--[--><!--]--></a></li><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><span>CI/CD</span></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/django-step-by-step/guide/ci-cd/github-actions/" class="nav-link" aria-label="GitHub Actions"><!--[--><!--]--> GitHub Actions <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/guide/ci-cd/gitlab-ci/" class="nav-link" aria-label="GitLab CI"><!--[--><!--]--> GitLab CI <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Deploy"><span class="title">Deploy</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Deploy"><span class="title">Deploy</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><!--[--><h4 class="dropdown-subtitle"><a href="/django-step-by-step/deploy/overview/" class="nav-link" aria-label="Overview"><!--[--><!--]--> Overview <!--[--><!--]--></a></h4><ul class="dropdown-subitem-wrapper"><!--[--><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/raspi/" class="nav-link" aria-label="Raspberry Pi"><!--[--><!--]--> Raspberry Pi <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/digital-ocean/" class="nav-link" aria-label="DigitalOcean"><!--[--><!--]--> DigitalOcean <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/aws/overview" class="nav-link" aria-label="AWS Overview"><!--[--><!--]--> AWS Overview <!--[--><!--]--></a></li><li class="dropdown-subitem"><a href="/django-step-by-step/deploy/aws/docker-swarm-ec2/" class="nav-link" aria-label="Docker Swarm on EC2"><!--[--><!--]--> Docker Swarm on EC2 <!--[--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/" class="router-link-active router-link-exact-active nav-link router-link-active" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/django-step-by-step/zh/" class="nav-link" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a class="nav-link external" href="https://github.com/briancaffey/django-step-by-step" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--[--><p class="sidebar-heading sidebar-item">12 Factor App</p><ul class=""><li><!--[--><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/#i-codebase" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="I: Codebase"><!--[--><!--]--> I: Codebase <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/#ii-dependencies" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="II: Dependencies"><!--[--><!--]--> II: Dependencies <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/#iii-config" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="III: Config"><!--[--><!--]--> III: Config <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/#iv-backing-services" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="IV: Backing Services"><!--[--><!--]--> IV: Backing Services <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/#v-build-release-run" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="V: Build, release, run"><!--[--><!--]--> V: Build, release, run <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/#vi-processes" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="VI: Processes"><!--[--><!--]--> VI: Processes <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/#vii-port-binding" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="VII: Port binding"><!--[--><!--]--> VII: Port binding <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/#viii-concurrency" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="VIII: Concurrency"><!--[--><!--]--> VIII: Concurrency <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/#ix-disposability" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="IX: Disposability"><!--[--><!--]--> IX: Disposability <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/#x-dev-prod-parity" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="X: Dev/prod parity"><!--[--><!--]--> X: Dev/prod parity <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/#xi-logs" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="XI: Logs"><!--[--><!--]--> XI: Logs <!--[--><!--]--></a><!----><!--]--></li><li><!--[--><a aria-current="page" href="/django-step-by-step/topics/twelve-factor-app/#xii-admin-processes" class="router-link-active router-link-exact-active nav-link sidebar-item" aria-label="XII: Admin processes"><!--[--><!--]--> XII: Admin processes <!--[--><!--]--></a><!----><!--]--></li></ul><!--]--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="_12-factor-app" tabindex="-1"><a class="header-anchor" href="#_12-factor-app" aria-hidden="true">#</a> 12 Factor App</h1><p>This project tries to follow the <a href="https://12factor.net/" target="_blank" rel="noopener noreferrer">12 Factor App<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a> principles. Here are the 12 factors of the 12 Factor app with a brief description of how they are achived in this project across multiple deployment environments.</p><h2 id="i-codebase" tabindex="-1"><a class="header-anchor" href="#i-codebase" aria-hidden="true">#</a> I: Codebase</h2><p>The code can be found in multiple public repositories:</p><blockquote><p>One codebase tracked in revision control, many deploys</p></blockquote><ul><li><strong>GitHub</strong> (please open any issues, pull requests or discussions here): <a href="https://github.com/briancaffey/django-step-by-step" target="_blank" rel="noopener noreferrer">https://github.com/briancaffey/django-step-by-step<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><strong>GitLab</strong>: <a href="https://gitlab.com/briancaffey/django-step-by-step" target="_blank" rel="noopener noreferrer">https://gitlab.com/briancaffey/django-step-by-step<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li><li><strong>BitBucket</strong>: <a href="https://bitbucket.org/briancaffey1/django-step-by-step/" target="_blank" rel="noopener noreferrer">https://bitbucket.org/briancaffey1/django-step-by-step/<span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span></a></li></ul><p>In the case of AWS deployment with CDK, there are multiple applications that are shared as dependencies through libraries (<strong>II: Dependencies</strong>).</p><h2 id="ii-dependencies" tabindex="-1"><a class="header-anchor" href="#ii-dependencies" aria-hidden="true">#</a> II: Dependencies</h2><p>There are a few different ways in which this project manages dependencies:</p><ul><li><code>poetry</code> manages Python dependencies</li><li><code>npm</code> manages TypeScript/JavaScript dependencies for the construct library application</li><li>The <code>Dockerfile</code> defines dependencies needed for the container, including the version of Python to use</li><li>The <code>django-cdk</code> library defines specific version of AWS services to use, such as the version of postgres and Redis that are used</li></ul><h2 id="iii-config" tabindex="-1"><a class="header-anchor" href="#iii-config" aria-hidden="true">#</a> III: Config</h2><p>There is a good amount of environment variables used for configuration both locally and in the different production environments.</p><p>Locally, the application uses default values that allow development in a virtual environment to work without the need for configuring any environment variables as a separate step.</p><p>For example, Postgres is configured with the following default values in the Django application:</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code>DATABASES <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;default&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;ENGINE&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;django.db.backends.postgresql_psycopg2&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;NAME&quot;</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;POSTGRES_NAME&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">&quot;USER&quot;</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;POSTGRES_USERNAME&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">&quot;PASSWORD&quot;</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;POSTGRES_PASSWORD&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;postgres&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">&quot;HOST&quot;</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;POSTGRES_SERVICE_HOST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token string">&quot;PORT&quot;</span><span class="token punctuation">:</span> os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">&quot;POSTGRES_SERVICE_PORT&quot;</span><span class="token punctuation">,</span> <span class="token number">5432</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>The <code>django-cdk</code> application uses environment variables to determine which options to use for deployment. For example, the <code>HostedZoneName</code> is read in from the environment and use to determin which DNS records and ACM records to create. CloudFormation Stacks help to isolate environments, and no infrstructure is shared between environments.</p><blockquote><p>A litmus test for whether an app has all config correctly factored out of the code is whether the codebase could be made open source at any moment, without compromising any credentials.</p></blockquote><p>This is another important point from the 12 Factor App principles that is true for this project.</p><p>One interesting part about config is the Postgres password for the ECS environment. The ECS environment uses an AWS Secrets Manager <code>Secret</code> to store the database password information, including the password, in a JSON string.</p><p>The name of this <code>Secret</code> is passed as an environment to the Django application, and the Django application uses another library to retrieve and cache the database password for later use. Again, the value of the secret is not passed to Django as an environment variable, but the name of the <code>Secret</code> (from AWS Secrets Manager) is the value passed. This way we don&#39;t even have to worry about what the password is. It is not stored in the code base and it is not even stored anywhere in config (until is created in AWS Secrets Manager).</p><h2 id="iv-backing-services" tabindex="-1"><a class="header-anchor" href="#iv-backing-services" aria-hidden="true">#</a> IV: Backing Services</h2><p>In AWS, it is easy to start relying on AWS services such as RDS, ElastiCache, S3 and other services.</p><h2 id="v-build-release-run" tabindex="-1"><a class="header-anchor" href="#v-build-release-run" aria-hidden="true">#</a> V: Build, release, run</h2><p>This step in the 12 Factor App is where CDK really shines. The <code>cdk deploy</code> command builds, releases and runs the application in one command. First, it is important to note that CDK uses something called <code>DockerImageAsset</code>, which allows us to point to the directory and Dockerfile of an application that we want to build and push to a docker registry. To use this feature, we must first run <code>cdk bootstrap</code> once in our AWS account. This will create the ECR registry that any <code>DockerImageAsset</code> will be pushed to.</p><p>When <code>cdk deploy</code> runs, it first builds and pushes the docker image to the ECR registry created by the <code>cdk bootstrap</code> command. <code>cdk deploy</code> then proceeds to create or update the AWS resources defined in the construct. Another advantage of CDK is automatic rollbacks.</p><h2 id="vi-processes" tabindex="-1"><a class="header-anchor" href="#vi-processes" aria-hidden="true">#</a> VI: Processes</h2><blockquote><p>Execute the app as one or more stateless processes</p></blockquote><p>In each environment, both local and non-local, the application&#39;s processes are clearly defined.</p><p>The CDK construct is passed a list of strings that define the processes that are run in the container for the wep services as well as the celery worker and celery beat proceses.</p><h2 id="vii-port-binding" tabindex="-1"><a class="header-anchor" href="#vii-port-binding" aria-hidden="true">#</a> VII: Port binding</h2><p>This is done in ECS.</p><h2 id="viii-concurrency" tabindex="-1"><a class="header-anchor" href="#viii-concurrency" aria-hidden="true">#</a> VIII: Concurrency</h2><blockquote><p>The array of process types and number of processes of each type is known as the process formation.</p></blockquote><p>The ECS construct has a simple process formation: web service that scales up and down between a minimum and maximum number of instances. Celery workers that scale between a minimum and maximum number of instances, and a single celery beat process.</p><h2 id="ix-disposability" tabindex="-1"><a class="header-anchor" href="#ix-disposability" aria-hidden="true">#</a> IX: Disposability</h2><p>Using CDK is a great way to put application disposability into practice. ECS services make sure that some number of ECS Tasks are running at a given point in time. If we go into the AWS console and delete a task, it will be started again almost instantly.</p><h2 id="x-dev-prod-parity" tabindex="-1"><a class="header-anchor" href="#x-dev-prod-parity" aria-hidden="true">#</a> X: Dev/prod parity</h2><p>This project makes dev/prod partiy somewhat trivial. Using Infrastrucutre as Code, we can be condifent that two environments will only vary by the values that are passed in through through environment variables. If the only difference between two application stacks is the subdomain, then we can expect that everything else about the two applications is similar and that none of the other resources between the two enviroments will be shared.</p><h2 id="xi-logs" tabindex="-1"><a class="header-anchor" href="#xi-logs" aria-hidden="true">#</a> XI: Logs</h2><p>CloudWatch is a great tool for monitoring logs and getting observability with minimal effort.</p><h2 id="xii-admin-processes" tabindex="-1"><a class="header-anchor" href="#xii-admin-processes" aria-hidden="true">#</a> XII: Admin processes</h2><blockquote><p>Run admin/management tasks as one-off processes</p></blockquote><p>Developers will often wish to do one-off administrative or maintenance tasks for the app, such as:</p><ul><li>Running database migrations</li><li>Running a console</li><li>Running one-time scripts committed into the app’s repo</li></ul><p>With ECS and CDK, management commands can be run easily either through automation or using a new tool called ECS Exec.</p><p>To run automated tasks, <code>managementCommandProps</code> can be passed a value of <code>true</code> (<code>false</code> by default). This will run the task each time the application is deployed with <code>cdk deploy</code>. This uses the an AWS Custom Resource that is defined in the construct. The CR&#39;s <code>onCreate</code> and <code>unUpdate</code> are set to an <code>AwsSdkCall</code> that runs <code>ecs:RunTask</code> with the appropiate parameters.</p><p>If you do not want to run database migrations automatically as a Custom Resource in CDK, you can use the AWS CLI to run the command from your CI tool, or you can use ECS Exec.</p><p>ECS Exec would also be a good choice if you want to run a one-time script or open a console in the container.</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://github.com/briancaffey/django-step-by-step/edit/main/vuepress-docs/docs/topics/twelve-factor-app/README.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page on GitHub"><!--[--><!--]--> Edit this page on GitHub <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">9/11/2022, 3:46:32 AM</span></div><!----></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/django-step-by-step/topics/django/" class="nav-link" aria-label="About the Django Application"><!--[--><!--]--> About the Django Application <!--[--><!--]--></a> → </span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/django-step-by-step/assets/js/runtime~app.2f187f5c.js" defer></script><script src="/django-step-by-step/assets/js/981.12928b34.js" defer></script><script src="/django-step-by-step/assets/js/app.be7711e5.js" defer></script>
  </body>
</html>
